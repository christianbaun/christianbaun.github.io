var DEBUG=!0,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:");String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trunc=function(a){if(this.length<=a)return this.toString();a=this.substring(0,a-1);var b=a.lastIndexOf(" ");return(6<b&&20>a.length-b?a.substring(0,b):a)+"..."};String.prototype.startsWith=function(a){return 0===this.indexOf(a)};
String.prototype.endsWith=function(a){return this.substring(this.length-a.length)===a};String.prototype.getExt=function(){var a=this.lastIndexOf(".");return 0>=a||a>=this.length-1?"":this.substring(a+1).toLowerCase()};String.prototype.replaceExt=function(a){var b=this.lastIndexOf(".");return 0>=b?this:this.substring(0,b+1)+a};
String.prototype.fixUrl=function(){for(var a,b,d=this+"";0<(a=d.indexOf("../"));){if(1===a||-1===(b=d.lastIndexOf("/",a-2)))return d.substring(a+3);d=d.substring(0,b)+d.substring(a+2)}return d};
(function(a){a.fn.addPlayer=function(b,d){b=a.extend({},a.fn.addPlayer.defaults,b);d=a.extend({},a.fn.addPlayer.text,d);if(typeof a.fn.jPlayer!==UNDEF){var e={cont:"jp-cont",mini:"jp-mini",audio:"jp-audio",video:"jp-video",playerType:"jp-type-single",player:"jp-jplayer",title:"jp-title",progress:"jp-progress",controls:"jp-controls-holder",startStop:"jp-startstop",volume:"jp-volume",times:"jp-times",toggles:"jp-toggles",warning:"jp-warning",videoPlay:"jp-video-play",play:"jp-play",pause:"jp-pause",
stop:"jp-stop",seekBar:"jp-seek-bar",playBar:"jp-play-bar",mute:"jp-mute",unmute:"jp-unmute",volumeBar:"jp-volume-bar",volumeBarValue:"jp-volume-bar-value",volumeMax:"jp-volume-max",currentTime:"jp-current-time",duration:"jp-duration",fullScreen:"jp-full-screen",restoreScreen:"jp-restore-screen",repeat:"jp-repeat",repeatOff:"jp-repeat-off",gui:"jp-gui",noSolution:"jp-no-solution",playing:"playing"},h=function(a){var b,c=function(a){return'<a class="'+e[a]+'" title="'+d[a]+'">'+d[a]+"</a>"};b='<div class="'+
e.progress+'"><div class="'+e.seekBar+'"><div class="'+e.playBar+'"></div></div></div>';b+='<div class="'+e.controls+'">';b+='<div class="'+e.startStop+'">'+c("play")+c("pause")+c("stop")+"</div>";b+='<div class="'+e.volume+'">'+c("mute")+c("unmute")+'<div class="'+e.volumeBar+'"><div class="'+e.volumeBarValue+'"></div></div></div>';b+='<div class="'+e.times+'"><div class="'+e.currentTime+'"></div><div class="'+e.duration+'"></div></div>';b+='<div class="'+e.toggles+'">'+(a?"":c("fullScreen")+c("restoreScreen"))+
c("repeat")+c("repeatOff")+"</div>";return b+"</div>"},l=function(){var b;(b=a(this).data("media"))&&b.jPlayer("pause");return!1},j=function(){var b;(b=a(this).data("media"))&&b.jPlayer("destroy");a(window).off("keydown",w);return!1},p=function(){var b;(b=a(this).data("media"))&&b.jPlayer("stop");return!1},g=function(){var b;(b=a(this).data("media"))&&b.jPlayer("play");return!1},c=a(this).eq(0),w=function(a){return document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)?
!0:32===(a?a.keyCode:window.event.keyCode)?(c.find("."+e.player).jPlayer(c.data(e.playing)?"pause":"play"),!1):!0},v=function(a){return b.hasOwnProperty("audio")?b.audio:0<".mp3.m4a.f4a.rtmpa".indexOf(a.getExt())},t=function(a){var b=v(a)?"a":"v";switch(a.getExt()){case "mp3":a="mp3";break;case "mp4":a="m4"+b;break;case "ogg":a="og"+b;break;case "webm":a="webm"+b;break;case "flv":case "f4a":case "f4v":a="fl"+b;break;case "rtmp":a="rtmp"+b;break;default:a=null}return a};return this.each(function(){var c=
a(this),k,n,z=b.folder||"",A,f,m,u,r,s=0;b.elem?(r=a(this).find(b.elem),f=r.attr("href"),m=r.attr("title"),n=r.find("img:first"),n.length?(u=n.attr("src"),m||(m=n.attr("alt"))):u=m=""):(f=b.src,m=b.title||"",u=b.poster||"",r=a('<a href="'+f+'"'+(m?' title="'+m+'"':"")+">"+(u?'<img src="'+u+'">':"")+"</a>").appendTo(a(this)));if(LOCAL){var B=a('<div class="'+e.warning+'">'+d.localFlashWarning+"</a></div>").appendTo(r);r.css("position","relative");B.hide();setTimeout(function(){B.fadeIn()},2E3)}if(f){b.auto&&
(b.lowPriority||a("."+e.cont).each(function(){if(a(this).data(e.playing))return!0}));0<f.indexOf("::")?(f=f.split("::"),k=v(f[0]),n=t(f[0])):(k=v(f),n=t(f));this.id||(this.id=b.id+a.fn.addPlayer.id++);A="#"+this.id;a(c).addClass(e.cont);b.mini&&a(c).addClass(e.mini);var x=k;"absolute"!==c.css("position")&&"fixed"!==c.css("position")&&c.css({position:"relative"});c.css({overflow:"hidden"});var y,q=a('<div class="'+(x?e.audio:e.video)+'"></div>').appendTo(c),q=a('<div class="'+e.playerType+'"></div>').appendTo(q);
y=a('<div class="'+e.player+'"></div>').appendTo(q);q.append('<div class="'+e.videoPlay+'"><a>'+d.play+"</a></div>");m&&q.append('<div class="'+e.title+'"><ul><li>'+m+"</li></ul></div>");q.append('<div class="'+e.gui+'">'+h(x)+"</div>");q.find("."+e.gui+" a").attr("href",NOLINK);c.append('<div class="'+e.noSolution+'">'+d.noSolution+"</div>");m=c.css("paddingTop");var x=c.css("paddingLeft"),q=c.css("paddingRight"),D=c.css("paddingBottom");c.find("."+e.gui).css({bottom:D,left:x,right:q});c.find("."+
e.title).css({top:m,left:x,right:q});var C=function(){var c={},d,e,g=b.relativeUrl?"":location.href.substring(0,location.href.lastIndexOf("/")+1);a.isArray(f)?(s>=f.length&&(s=0),d=f[s]):(d=f,u&&(c.poster=(g+z+u).fixUrl()));e=t(d);c[e]=(g+z+d).fixUrl();return c},E=function(){if(a.cookie){var b=c.find("."+e.currentTime).text().split(":"),b=2<b.length?60*(60*parseInt(b[0],10)+parseInt(b[1],10))+parseInt(b[2],10):60*parseInt(b[0],10)+parseInt(b[1],10);a.cookie("jp_"+c[0].id,(c.data(e.playing)?"1":"0")+
"::"+b+"::"+y.jPlayer("option","volume").toString().substring(0,5)+(s!==UNDEF?"::"+s:""))}};k=!k&&!(a.browser.mozilla&&0<=navigator.platform.indexOf("Mac"));y.jPlayer({cssSelectorAncestor:A,backgroundColor:b.backgroundColor,supplied:n,swfPath:b.resPath+"/"+b.swf,solution:b.solution,size:{width:"100%",height:"100%"},preload:"auto",loop:b.loop,volume:b.volume,autohide:{restored:k,full:k},ready:function(){var d=a(this),f;if(b.saveStatus)a:{if(a.cookie&&(f=a.cookie("jp_"+c[0].id))){f=f.split("::");f=
{playing:"1"===f[0],time:parseInt(f[1]||0,10),volume:parseFloat(f[2]||0.8),curr:parseInt(f[3]||0,10)};break a}f=null}else f=null;c.data("media",d);b.saveStatus&&(a(window).on("unload",E),f&&(s=f.curr));var h=C();r&&r.hide();c.find("."+e.gui).show();d.jPlayer("setMedia",h);c.on({play:g,pause:l,stop:p,destroy:j});b.saveStatus&&f?(d.jPlayer("volume",f.volume),d.jPlayer(f.playing?"play":"pause",f.time)):b.auto&&d.jPlayer("play");if(!b.lowPriority)a(window).on("keydown",w)},play:function(){a(this).jPlayer("pauseOthers");
c.data(e.playing,!0)},pause:function(){c.data(e.playing,!1)},stop:function(){c.data(e.playing,!1)},ended:function(){a.isArray(f)&&(s+1<f.length||b.loop)?(s=(s+1)%f.length,a(this).jPlayer("setMedia",C()),b.auto&&a(this).jPlayer("play")):(c.data(e.playing,!1),a.isFunction(b.ended)&&b.ended.call())}})}})}};a.fn.addPlayer.id=0;a.fn.addPlayer.defaults={id:"jp_container_",backgroundColor:"#000000",resPath:"",swf:"Jplayer.swf",relativeUrl:!1,solution:"html,flash",volume:0.8,auto:!1,loop:!1,keyboard:!0,lowPriority:!1,
saveStatus:!1,mini:!1,size:{width:"100%",height:"100%"}};a.fn.addPlayer.text={play:"play",pause:"pause",stop:"stop",mute:"mute",unmute:"unmute",fullScreen:"full screen",restoreScreen:"restore screen",repeat:"repeat",repeatOff:"repeat off",localFlashWarning:"Local Flash playback is possibly blocked by Flash security rules. Test videos in the uploaded album!",noSolution:'<span>Unsupported media format</span>You might need to either update your browser or the <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a> or use another browser to play this media.'}})(jQuery);
(function(a){a.fn.alignTo=function(b,d){d=a.extend({},a.fn.alignTo.defaults,d);"string"===typeof b&&(b=a(b));if(b instanceof a&&b.length){var e=b.offset(),h=b.outerWidth(),l=b.outerHeight();return a(this).each(function(){var j=a(this).outerWidth(),p=a(this).outerHeight(),g=Math.round(e.left+d.toX*h/2+(d.toX-1)*d.gap),c=Math.round(e.top+d.toY*l/2+(d.toY-1)*d.gap),g=Math.round(g-d.posX*j/2),c=Math.round(c-d.posY*p/2);0>c?1!==d.toX?c=0:2!==d.toY&&(c=e.top+b.outerHeight()+d.gap):c+p>a(window).height()&&
(1!==d.toX?c=a(window).height()-p:0!==d.toY&&(c=e.top-p-d.gap));0>g?1!==d.toY?g=0:2!==d.toX&&(g=e.left+b.outerWidth()+d.gap):g+j>a(window).width()&&(1!==d.toY?g=a(window).width()-j:0!==d.toX&&(g=e.left-j-d.gap));a(this).css({position:"absolute",left:g,top:c})})}};a.fn.alignTo.defaults={gap:5,posX:1,posY:2,toX:1,toY:0}})(jQuery);
(function(a){a.fn.addHint=function(b,d){b&&("string"!==typeof b&&!b.jquery)&&(d=b,b=null);d=a.extend({},a.fn.addHint.defaults,d);return this.each(function(){var e=a(this),h=b||e.attr("title"),l,j=!1,p=!1,g=!(h&&h.jquery),c;if(h&&h.length){var w=function(){if(g){var b=a("#"+d.id);b.length||(b=a("<div>",{"class":d.id,id:d.id}).hide().appendTo("body"));c=b;c.empty().html(h)}else c=h.show();c.off("mouseover",k);c.off("mouseout",n);var k=function(){l=clearTimeout(l);j=!0;c.stop(!0,!0).css({opacity:1}).show()},
n=function(){p||(l=clearTimeout(l),j=!1,t())};c.on("mouseover",k);c.on("mouseout",n);c.find("input").on({focus:function(){p=!0;k()},blur:function(){p=!1}});c.stop(!0,!0).alignTo(e,{posX:d.posX,posY:d.posY,toX:d.toX,toY:d.toY});c.css({opacity:0}).show().animate({opacity:1},200);document.touchMode?l=setTimeout(t,d.stay):j=!0},v=function(){j=!1;l=clearTimeout(l);t()};e.on("removeHint",v);var t=function(){!j&&(c&&c.length)&&c.stop(!0,!1).animate({opacity:0},200,function(){a(this).hide()})};h.jquery?h.addClass(d.id):
e.removeAttr("title");e.on(document.touchMode?{touchstart:w}:{"focus mouseenter":w,"blur mouseleave":v})}})};a.fn.addHint.defaults={id:"hint",stay:3E3,posX:1,posY:2,toX:1,toY:0}})(jQuery);
